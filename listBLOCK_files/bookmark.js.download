var hostSpins = GlobalServerName;
var spinsHost = hostSpins.replace("https", "http");

function changeStyleOver(thisObj){
	thisObj.style.backgroundColor = "#fffac2";
	thisObj.style.cursor = "pointer";
	thisObj.style.fontWeight = "bold";
}

function changeStyleOut(thisObj){
	thisObj.style.backgroundColor = "white";
	thisObj.style.cursor = "default";
	thisObj.style.fontWeight = "normal";
}

function changeStyleOverDefault(thisObj){
	thisObj.style.cursor = "pointer";
	thisObj.style.textDecoration = "none";
}

function changeStyleOutDefault(thisObj){
	thisObj.style.cursor = "default";
	thisObj.style.textDecoration = "underline";
}

function changeStyleOverDefault2(thisObj){
	thisObj.style.cursor = "pointer";
	thisObj.style.color = "blue";
}

function changeStyleOutDefault2(thisObj){
	thisObj.style.cursor = "default";
	thisObj.style.color = "#000000";
}

function showMyBookMarkInfo(bookMarkIntro){
	var elem = document.getElementById(bookMarkIntro);
	if(elem){
		elem.style.display="block";
	}
	
	return false;
}

function hideMyBookMarkInfo(bookMarkIntro){
	var elem = document.getElementById(bookMarkIntro);
	
	if(elem){
		elem.style.display="none";
	}
	
	return false;	
}

function showShortListedInfo(){
	showMyBookMarkInfo('bookMarkShortList');
	showMyBookMarkInfo('shortListed');
}

function showMsgFromApp(strMsg){
	alert(strMsg);
}

function goToMyBookmark(){
	document.forms[0].action=spinsHost + "/webapp/BP13AWFlatAvail/BP13EBMyBookMark?action=MYBOOKMARK" + getCurrBookMarkParam();
	document.forms[0].method="post";
	document.forms[0].submit();
	return false;
}

function doLogOut(){
	window.moveTo(0, 0);
	window.resizeTo(screen.width, screen.height);
	//window.location.href = hostSpins + "/webapp/BF02SPINS2/BF02SSPINSLogoutServlet";
	window.location.href = hostSpins + "/webapp/SX05AWSPCP/SX05PSuccessLogout.jsp";
	return false;
}

function sessionExpired(){
	alert('Your session has expired.');
	doLogOut();
	return false;
}

function goToLogOut(){
	if (confirm('Would you like to log out of the session now?')){
		document.forms[0].action=spinsHost + "/webapp/BP13AWFlatAvail/BP13EBMyBookMark?action=LOGOUT&ballot="+document.forms[0].dteBallot.value;
		document.forms[0].method="post";
		document.forms[0].submit();
	}
	return false;
}

function showBookMarkLogIn(){
	showMyBookMarkInfo('bookMarkIntro');
	return false;
}

function proceedToLogin(entryTownFlat,ballot){
	var servHost = hostSpins;
	var regexService = /intranet-appd/;
	if(regexService.test(servHost) == true){
		servHost = "https://services2s.nicehomes.com.sg";
	}else{
		var regexService2 = /intranet-app/;
		if(regexService2.test(servHost) == true){
			servHost = "https://services2.hdb.gov.sg";
		}
	}

	var bookMarkLink = servHost + "/webapp/BP13AWFlatAvail/BP13EBMyBookMarkLogin?entryTownFlat=" + entryTownFlat +
	 				   "&action=LOGIN&ballotDte="+ballot;
	window.moveTo(0, 0);
	window.resizeTo(screen.width, screen.height);
	window.location.href = bookMarkLink; 
	return false;
}

function doSelectExercise(selected,dateBallot){
	
	var bookMarkLink = spinsHost + "/webapp/BP13AWFlatAvail/BP13EBMyBookMark?selIndex=" + selected +"&ballot="+dateBallot+ 
					   "&action=SELECT" + getCurrBookMarkParam();
	window.location.href = bookMarkLink;    
	return false;
}

function backToSearch(){
	goblockOne();
	var param = window.location.search;
	param = param.replace("?", "&");
	document.forms[0].action=spinsHost +"/webapp/BP13AWFlatAvail/BP13EBMyBookMark?action=BACK" + getCurrBookMarkParam() + param;
    document.forms[0].method="post";
    document.forms[0].submit();
    return false;
}

function doDeleteBookMark(bookMarkKey){
	document.forms[0].action=spinsHost +"/webapp/BP13AWFlatAvail/BP13EBMyBookMark?action=DELETE" + getCurrBookMarkParam() +
										"&levelInput=" + bookMarkKey;
	document.forms[0].method="post";
	document.forms[0].submit();
	return false;
}

function goToSelectExercise(){
	document.forms[0].action=spinsHost +"/webapp/BP13AWFlatAvail/BP13EBMyBookMark?action=SELECT_PAGE" + getCurrBookMarkParam();
	document.forms[0].method="post";
	document.forms[0].submit();
	return false;
}

function showSelectedCategory(){
	var bookMarkLink = spinsHost + "/webapp/BP13AWFlatAvail/BP13EBMyBookMark?action=SHOW_CAT" + getCurrBookMarkParam();
	window.location.href = bookMarkLink;    
	return false;
}

function changeToBookMarkTitle(){
	var imgTitle = document.getElementById("titlebar");
	if(imgTitle != null)
	{
		var src = imgTitle.src;
		src = src.replace("mapfdtitle", "mapbm");
		//imgTitle.width = "150";
		imgTitle.src = src;	
	}
	
}

function getCookie(cookieName) {
	var cookies = document.cookie;
	if (cookies == null) return null;
	
	var cookieNameEQ = cookieName + "=";
	var cookieStart = cookies.indexOf(cookieNameEQ);
	if (cookieStart < 0) return null;
	
	cookieStart += cookieNameEQ.length;
	var cookieEnd = cookies.indexOf(";", cookieStart);
	if (cookieEnd < 0) cookieEnd = cookies.length;
	
	var val = cookies.substring(cookieStart, cookieEnd);
	if (val == "") val = null;
	
	return val;
}

function resizeWindow(){
	window.moveTo(10, 5);
	if(window.ActiveXObject){
		window.resizeTo(480, 685);
	}else{
		window.resizeTo(480, 658);
	}
}

function getCurrBookMarkParam(){
	if(currBookMarkVal == null || currBookMarkVal == ""){
		return "";
	}
	
	return "&currentBookMark=" + currBookMarkVal;
}

function getCurrBookMarkCookie(){
	if(currBookMarkVal == null || currBookMarkVal == ""){
		return "";
	}
	
	return currBookMarkVal;
}

function setCurrBookMarkCookie(){
	currBookMarkVal = getCookie("currentBookMark");
}
var currBookMarkVal = "";
setCurrBookMarkCookie();

