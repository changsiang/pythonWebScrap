
$(function(){ 
	$(document).foundation(); 
	
    zoom();
    zoom1();
    zoom2();
    zoom3();
    zoom4();
    zoom5();
    zoom6();
    zoom7();
    zoom8();
	
  //for SHINE Server
  seturl = "../..";
  isgurl = "http://services2.hdb.gov.sg";

  var applyre = /www[\w\d]*\.hdb\.gov\.sg/; 
  if ( applyre.test(location.host) == true ) 
  { 
  seturl = "../..";
  //seturl = "http://www100.hdb.gov.sg";
  } 

  var applyre = /intranet[\w\d]*\.hdb\.gov\.sg/; 
  if ( applyre.test(location.host) == true ) 
  { 
  isgurl = "http://intranet-app.hdb.gov.sg";
  } 

  var applyre = /his67a[\w\d]*\.hdb\.gov\.sg/; 
  if ( applyre.test(location.host) == true ) 
  { 
  isgurl = "http://intranet-appd.hdb.gov.sg";
  } 

  var applyre = /his77b[\w\d]*\.hdb\.gov\.sg/; 
  if ( applyre.test(location.host) == true ) 
  { 
  isgurl = "http://intranet-appd.hdb.gov.sg";
  } 

  var applyre = /intranetu\.hdb\.gov\.sg/; 
  if ( applyre.test(location.host) == true ) 
  { 
  isgurl = "http://intranet-appd.hdb.gov.sg";
  } 

  var applyre = /www[\w\d]*\.nicehomes\.com\.sg/; 
  if ( applyre.test(location.host) == true ) 
  { 
  isgurl = "http://services2s.nicehomes.com.sg";
  } 

  //var flattype="", ethsel="",ctrno="", shortlist="", qs=new Querystring();
  //getParameter();

  //if (isgtwn=="Ang Mo Kio") isgtwn = "AMK2";
  /*if (isgtwn=="Ang Mo Kio") isgtwn = "AMK";
  if (isgtwn=="Bedok") isgtwn = "BD";
  if (isgtwn=="Bishan") isgtwn = "BH";
  if (isgtwn=="Bukit Batok") isgtwn = "BB";
  if (isgtwn=="Bukit Merah") isgtwn = "BM";
  if (isgtwn=="Bukit Panjang") isgtwn = "BP";
  if (isgtwn=="Bukit Timah") isgtwn = "BT";
  if (isgtwn=="Clementi") isgtwn = "CL"; //no use in current sbf selection
  if (isgtwn=="Central") isgtwn = "CT";
  if (isgtwn=="Choa Chu Kang") isgtwn = "CCK";
  if (isgtwn=="Geylang") isgtwn = "GL";
  if (isgtwn=="Hougang") isgtwn = "HG";
  if (isgtwn=="Jurong East") isgtwn = "JE";
  if (isgtwn=="Jurong West") isgtwn = "JW";
  if (isgtwn=="Kallang/Whampoa") isgtwn = "KWN";
  if (isgtwn=="Marine Parade") isgtwn = "MP"; //no use in current sbf selection
  if (isgtwn=="Pasir Ris") isgtwn = "PRC";
  if (isgtwn=="Punggol") isgtwn = "PG";
  if (isgtwn=="Queenstown") isgtwn = "QT";
  if (isgtwn=="Sembawang") isgtwn = "SB";
  if (isgtwn=="Serangoon") isgtwn = "SGN";
  if (isgtwn=="Sengkang") isgtwn = "SK";
  if (isgtwn=="Tampines") isgtwn = "TAP";
  if (isgtwn=="Toa Payoh") isgtwn = "TP";
  if (isgtwn=="Woodlands") isgtwn = "WL";
  if (isgtwn=="Yishun") isgtwn = "YS";*/
  
function Querystring(qs) { // optionally pass a querystring to parse
  this.params = new Object()
  this.get=Querystring_get
  
  if (qs == null)
    qs=location.search.substring(1,location.search.length)

  if (qs.length == 0) return

// Turn <plus> back to <space>
// See: http://www.w3.org/TR/REC-html40/interact/forms.html#h-17.13.4.1
  qs = qs.replace(/\+/g, ' ')
  var args = qs.split('&') // parse out name/value pairs separated via &
  
// split out each name=value pair
  for (var i=0;i<args.length;i++) {
    var value;
    var pair = args[i].split('=')
    var name = unescape(pair[0])

    if (pair.length == 2)
      value = unescape(pair[1])
    else
      value = name
    
    this.params[name] = value
  }
  
}

function Querystring_get(key, default_) {
  // This silly looking line changes UNDEFINED to NULL
  if (default_ == null) default_ = null;
  
  var value=this.params[key]
  if (value==null) value=default_;
  
  return value
}


/*function getParameter()
{
  //flattype = qs.get("ft");
  //blockplan = qs.get("bp");
  siteplan = qs.get("sp");
  //isgtwn = qs.get("twn");
  //isgctr = qs.get("ctr");
  //isgblk = qs.get("blk");
  rp = qs.get("rp");
  flattype2 = qs.get("flattype");
  isgtwn = refineTownName(getUrlParameters("Town", "", true));
  isgctr = getUrlParameters("Neighbourhood", "") + getUrlParameters("Contract", "");	
  isgblk = getUrlParameters("Block", "");
  blockplan = getUrlParameters("Block", "");
  flattype = refineFlatType(getUrlParameters("Flat", ""));
}*/

  //checkSBFPlan(); // init SBF FA plan image
  
  
  //REDIPS.dialog.init(); //initialize REDIPS dialog js
  // console.log($('.home-header').height());
  var detect_device = {};
  detect_device.mobile = (/mobile/i).test(navigator.userAgent);
  // console.log(detect_device.mobile);
  /*init google custom search*/
  initGoogleCSE();

  load_topnav();
  load_btonav();
  
  
  var url = window.location.pathname;
  var htmlfilename = url.substring(url.lastIndexOf('/')+1);
  
//  if (htmlfilename=='rp.html'){	  
//	   loadxml();
//	   load_slider();	// initialize the slider
//  }
//  

  if (htmlfilename=='rp.html'){  
	   loadRPXML();		   
  }


  if($("#owl-slideshow").length) {
    $("#owl-slideshow").owlCarousel({
        loop:true,
        autoplay: true,
        margin:5,
        nav:true,
        navText: ["",""],
        dots:false,
        smartSpeed:850,
        responsive:{
            0:{
                items:1
            },
            600:{
                items:3
            },
            1000:{
                items:3
            }
        }

    }); 
  }
  
  if($('.nav-tabs').length) {
    
    if($('.nav-tabs').hasClass('map-plan')) {
      var hash = location.href.split('#')[1];
      
      var load_html;
      if(hash == "layout-ideas") {
        load_html = "mp-items.html #layout-ideas-for-your-home";
        $('.nav-tabs .tab-title').removeClass('active');
        $('a[href="#layout-ideas-for-your-home"]').parent().addClass('active');
      }
      else {
        load_html = "mp-items.html " + $('.tabs .tab-title a:eq(0)').attr('href');
      }
      load_map_plan(load_html);
    }
    else {
      var load_html = "oc-items.html " + $('.tabs .tab-title a:eq(0)').attr('href');
      load_oc(load_html);
    }

    var maxH = 0;
    $('.nav-tabs > li').each(function() {
        maxH = Math.max(maxH, $(this).find('a').height());
    });
    $('.nav-tabs > li > a').height(maxH);
  }
  
  $('.nav-tabs .tab-title a').click(function(e) {
    e.preventDefault();
    $('.tabs .tab-title').filter('.active').removeClass('active');
    $(this).parent().addClass('active');

    if($('.nav-tabs').hasClass('map-plan')) {
      var load_html = "mp-items.html " + $(this).attr('href');
      load_map_plan(load_html);
    }
    else {
      var load_html = "oc-items.html " + $(this).attr('href');
      load_oc(load_html);   
    }
     
  });

});

function checkSBFPlan() {
	
	if($('#site-plan').length) {
	
		// Extract filename from current page.
		var url = window.location.pathname;
		var htmlfilename = url.substring(url.lastIndexOf('/')+1);
	
		if (htmlfilename =="siteplan.html")
		{
			// siteplan parameter need- twn and ctr only coz blk sharing the same image
			var dir ='../../15MAYSBF_FA_SITEPLAN_images_1905/$file/'+ isgtwn + '_' + isgctr +'.jpg' ;			
			
		}
		else if (htmlfilename =="gs.html"){
			
			// general specification parameter need- twn and ctr only coz blk sharing the same image
			var dir ='../../15MAYSBF_FA_GS_images_1905/$file/'+ isgtwn + '_' + isgctr +'.jpg' ;
			
		}
		else if (htmlfilename =="blockplan.html"){
			// general specification parameter need - twn and ctr and blk 
			var dir = '../../15MAYSBF_FA_BLOCKPLAN_images_1905/$file/'+ isgtwn + '_'+ isgctr + '_' + isgblk +'.jpg' ;					
		}
		else if (htmlfilename =="map.html"){
			
			// blockplan parameter need- twn and blk only
			var dir = '../../15MAYSBF_FA_MAP_images_1905/$file/'+ isgtwn + '_' + isgblk +'.jpg' ;
			
		}
		
		document.getElementById('op').src  = dir;	

	}
}

//load xml data
function loadxml() {

	//get parameter from url
		
	var blkNo = isgblk;
	var ctr = isgctr;
	var dtBallot = ballot;
	var flatType = flattype;
	//var arrayUnitNo = [];
	//var folderName;
	var a = document.getElementById('displayUnitNo');
	
	if (window.XMLHttpRequest) {
		// code for IE7+, Firefox, Chrome, Opera, Safari
		xmlhttp=new XMLHttpRequest();
	}
	else{
		// code for IE6, IE5
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.open("GET",serverMap+"15MAYSBF_FA_inc_1905/$file/sbf-rp-export.xml",false);
	xmlhttp.send();
	xmlDoc=xmlhttp.responseXML;
	
	//var townFromXml=""; 
	
	var x=xmlDoc.getElementsByTagName("flats");
	//alert(x.length);
	for (i=0;i<x.length;i++) {// loop through xml  
	
		if (x[i].getElementsByTagName("BLK")[0].childNodes[0].nodeValue == blkNo) {
			if (x[i].getElementsByTagName("CTR")[0].childNodes[0].nodeValue == ctr) {
			
				var STATUS = x[i].getElementsByTagName("STATUS")[0].childNodes[0].nodeValue;	
				//var RPEXIST = x[i].getElementsByTagName("RPEXIST")[0].childNodes[0].nodeValue;
//				var imgPath = x[i].getElementsByTagName("PATH")[0].childNodes[0].nodeValue;
				//alert(imgPath);
				//if ((STATUS != 'NW') && (RPEXIST == 'Yes')) {
				//if ((STATUS != 'NW') && (RPEXIST == 'YES')) {
				//if ((STATUS != 'NW') && (imgPath != '0')) {	
				//if ((STATUS != 'NW') && (imgPath != '0')) {
				if ((STATUS != 'NW')) {		
					//var unitNo = arrayUnitNo.concat(x[i].getElementsByTagName("UNIT")[0].childNodes[0].nodeValue);
//					var unitNo = x[i].getElementsByTagName("UNIT")[0].childNodes[0].nodeValue;					
//					if (a.innerHTML) {
//						a.innerHTML += ", " + unitNo;
//					} else {
//						a.innerHTML += unitNo;
//					}
					
//					townFromXml = x[i].getElementsByTagName("NT")[0].childNodes[0].nodeValue;
					
					/*
					//display photo
					//alert('1='+x[i].getElementsByTagName("PATH")[0]);
					//alert('2='+x[i].getElementsByTagName("PATH")[0].childNodes[0]);
					//alert('3='+x[i].getElementsByTagName("PATH")[0].childNodes[0].nodeValue);
					//var imgPath = x[i].getElementsByTagName("PATH")[0].childNodes[0].nodeValue;	
					var numOfImg = x[i].getElementsByTagName("NUMOFIMG")[0].childNodes[0].nodeValue;
					var fileNameUnitNo = unitNo.substring(1);
					townFromXml = x[i].getElementsByTagName("NT")[0].childNodes[0].nodeValue;
					//var townFromXml2 = x[i].getElementsByTagName("NT")[1].childNodes[0].nodeValue;												
					alert(townFromXml);
					//alert(townFromXml2);
					for (j=0;j<numOfImg;j++) {
						var imgFileName = "B" + blkNo + townFromXml + fileNameUnitNo + (j+1) + ".JPG";
						//alert('imgFileName='+imgFileName);
						
						$(".slider-for").append($("<div><img src=" + imgPath + imgFileName + "></img></div>"));
						$(".slider-nav").append($("<div class='thumbslides'><img src=" + imgPath + imgFileName + "></img></div>"));
						
					}
					*/
				}
			}
		}
	}
	
	var isBlkExist = false;
	
	//read and display image path from xml
	//xmlhttp.open("GET",serverMap+"15MAYSBF_FA_inc_1905/$file/rpimages.xml",false);
	var xmlUrl= "xml/vendor/rpimages_"+dtBallot+".xml";
	xmlhttp.open("GET",xmlUrl,false);
	xmlhttp.send();
	xmlDoc=xmlhttp.responseXML; 
	
	var x=xmlDoc.getElementsByTagName("flats");
	for (i=0;i<x.length;i++) {	
		if (x[i].getElementsByTagName("NT")[0].childNodes[0].nodeValue == isgtwn) {
			if (x[i].getElementsByTagName("BLK")[0].childNodes[0].nodeValue == blkNo) {
				isBlkExist = true;
				//if (x[i].getElementsByTagName("CTR")[0].childNodes[0].nodeValue == ctr) {
					
					var units = x[i].getElementsByTagName("UNIT");
					for (k=0;k<units.length;k++) {
						var unitNo = units[k].childNodes[0].nodeValue;
						//alert(imgFileName);
						
						if (a.innerHTML) {
							a.innerHTML += ", " + unitNo;
						} else {
							a.innerHTML += unitNo;
						}
					}
					
					var imgPath = x[i].getElementsByTagName("PATH")[0].childNodes[0].nodeValue;
					var imgFileNames = x[i].getElementsByTagName("FILENAME");
					for (j=0;j<imgFileNames.length;j++) {
						var imgFileName = imgFileNames[j].childNodes[0].nodeValue;
						//alert(imgFileName);
						
						$(".slider-for").append($("<div><img src=" + imgPath + imgFileName + "></img></div>"));
						$(".slider-nav").append($("<div class='thumbslides'><img src=" + imgPath + imgFileName + "></img></div>"));
					}
				//}
			}
		}
	}
	//alert(isBlkExist);
	if (!isBlkExist) {
		a.innerHTML = "There is no image for this block.";
	}
}

//load xml data
function loadRPXML() {
	//get parameter from url
	//var param = window.location.search;	
	var blkNo = isgblk;
	var ctr = isgctr;
	var dtBallot = ballot;
	var flatType = flattype;
	var a = document.getElementById('isMsg');
	var unitNoList = document.getElementById('displayUnitNo');
	var town = isgtwn;
	
	if (window.XMLHttpRequest) {
		// code for IE7+, Firefox, Chrome, Opera, Safari
		xmlhttp=new XMLHttpRequest();
	}
	else{
		// code for IE6, IE5
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
//	xmlhttp.open("GET","../../15MAYSBF_FA_inc_1905/$file/sbf-rp-export.xml",false);
//	xmlhttp.send();
//	xmlDoc=xmlhttp.responseXML; 
//	
//	var x=xmlDoc.getElementsByTagName("flats");
//	
//	for (i=0;i<x.length;i++) {// loop through xml  
//	
//		if (x[i].getElementsByTagName("BLK")[0].childNodes[0].nodeValue == blkNo) {
//			if (x[i].getElementsByTagName("CTR")[0].childNodes[0].nodeValue == ctr) {
//			
//				var STATUS = x[i].getElementsByTagName("STATUS")[0].childNodes[0].nodeValue;
//				
//				var imgPath = x[i].getElementsByTagName("PATH")[0].childNodes[0].nodeValue;
//				
//				if ((STATUS != 'NW') && (imgPath != '0')) {	
//				
//					var unitNo = x[i].getElementsByTagName("UNIT")[0].childNodes[0].nodeValue;
//	
//					// generate the table content to display unit number and link
//					$( ".rp-table-row-content" ).before( "<div class='rp-table-row'>" +
//														"<div class='rp-table-cell'>"+
//															 unitNo +
//														"</div>" +
//														"<div class='rp-table-cell'>" +
//															//"<a onclick='onChangeSrc(\""+ blkNo +"\",\""+ ctr +"\",\"" + unitNo + "\" );'>View</a>" +						
//															"<a onclick='onChangeSrc(\""+ blkNo +"\",\""+ ctr +"\",\"" + unitNo + "\",\""+ town +"\" );'>View</a>" +
//																														
//														"</div>" + 
//													"</div>" );	
//																	
//					
//				}
//			}
//		}
//	}
	
	var isBlkExist = false;
	
	//get unit no from xml
	//xmlhttp.open("GET",serverMap+"15MAYSBF_FA_inc_1905/$file/images.xml",false);
	var xmlUrl= "xml/vendor/rpimages_"+dtBallot+".xml";
	xmlhttp.open("GET",xmlUrl,false);
	xmlhttp.send();
	xmlDoc=xmlhttp.responseXML; 
	
	var x=xmlDoc.getElementsByTagName("flats");

	for (i=0;i<x.length;i++) {  
	
		if (x[i].getElementsByTagName("NT")[0].childNodes[0].nodeValue == town) {
			
			if (x[i].getElementsByTagName("BLK")[0].childNodes[0].nodeValue == blkNo) {
				
				if(x[i].getElementsByTagName("CTR")[0].childNodes[0].nodeValue == "0"  ||  x[i].getElementsByTagName("CTR")[0].childNodes[0].nodeValue == ctr ) {
					
				//check room type is not null first
		
				//alert('***2 '+x[i].getElementsByTagName("ROOMTYPE"));
//				alert('***3 '+x[i].getElementsByTagName("ROOMTYPE")[0]);
//				alert('***4 '+x[i].getElementsByTagName("ROOMTYPE")[0].childNodes);
//				alert('***5 '+x[i].getElementsByTagName("ROOMTYPE")[0].childNodes[0]);
//				alert('***6 '+x[i].getElementsByTagName("ROOMTYPE")[0].childNodes[0].nodeValue);

				//if ("undefined" != typeof x[i].getElementsByTagName("ROOMTYPE")[0]) {
					
				if (x[i].getElementsByTagName("ROOMTYPE").length != 0){
				
				//if ("undefined" != x[i].getElementsByTagName("ROOMTYPE")[0]) {
					//alert('a');
				//if ('null' != x[i].getElementsByTagName("ROOMTYPE").length == 0) {
				//if ('null' != x[i].getElementsByTagName("ROOMTYPE")) {
					//need check roomtype value before display photo
					//alert('xml roomtype='+x[i].getElementsByTagName("ROOMTYPE")[0].childNodes[0].nodeValue);
					//alert('parameter roomtype='+flattype2);
					if (x[i].getElementsByTagName("ROOMTYPE")[0].childNodes[0].nodeValue == flattype) {
									
						isBlkExist = true;
						
						a.innerHTML = "Please click on the unit number to view the photographs.";
						
						var units = x[i].getElementsByTagName("UNIT");				
						
						for (k=0;k<units.length;k++) {
							var unitNo = units[k].childNodes[0].nodeValue;
							
							if (unitNoList.innerHTML) {						
									unitNoList.innerHTML += ", <a class='unitNo' onclick='onChangeSrc(\""+ blkNo +"\",\""+ ctr +"\",\"" + unitNo + "\",\""+ town +"\",\""+ dtBallot +"\");'>" + unitNo +"</a>";
								} else {							
									unitNoList.innerHTML += "<a class='unitNo' onclick='onChangeSrc(\""+ blkNo +"\",\""+ ctr +"\",\"" + unitNo + "\",\""+ town +"\" ,\""+ dtBallot +"\");'>" + unitNo +"</a>";
								}				
											
						}				
					}
				} else {
					//no room type, process as normal
					isBlkExist = true;
						
					a.innerHTML = "Please click on the unit number to view the photographs.";
					
					var units = x[i].getElementsByTagName("UNIT");				
					
					for (k=0;k<units.length;k++) {
						var unitNo = units[k].childNodes[0].nodeValue;
						
						if (unitNoList.innerHTML) {						
								unitNoList.innerHTML += ", <a class='unitNo' onclick='onChangeSrc(\""+ blkNo +"\",\""+ ctr +"\",\"" + unitNo + "\",\""+ town +"\" ,\""+ dtBallot +"\");'>" + unitNo +"</a>";
							} else {							
								unitNoList.innerHTML += "<a class='unitNo' onclick='onChangeSrc(\""+ blkNo +"\",\""+ ctr +"\",\"" + unitNo + "\",\""+ town +"\" ,\""+ dtBallot +"\");'>" + unitNo +"</a>";
							}				
										
					}
				}				
			  }
			}
		}
	}
	
	if (!isBlkExist) {
		a.innerHTML = "There is no image for this block.";
	}	
	$('.unitNo').on('click', function () {
	    $('.unitNo').removeClass('selected');
	    $(this).addClass('selected');
	});
}

/*$(document).ready(function () {
    $('.unitNo').on('click', function () {
        $('.unitNo').removeClass('selected');
        $(this).addClass('selected');
    });
});*/

function onChangeSrc(blkNo, ctr, unitNo, town,dtBallot){
	//alert( "blkNo : "+ blkNo);
	//alert( "ctr : "+ ctr);
	//alert( "unitNo : "+ unitNo);
	//alert( "unitNo : "+ unitNo.substring(1));	

	
	$(".slider-for").remove(); // remove to avoid slider from append continuesly at second click
	$(".slider-nav").remove();
	$(".sliderContainer").append("<div class='slider slider-for'></div><div class='slider slider-nav'></div>");	
	
	if (window.XMLHttpRequest) {
		// code for IE7+, Firefox, Chrome, Opera, Safari
		xmlhttp=new XMLHttpRequest();
	}
	else{
		// code for IE6, IE5
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}

	//read and display image path from xml
	//xmlhttp.open("GET",serverMap+"15MAYSBF_FA_inc_1905/$file/rpimages.xml",false);
	var xmlUrl= "xml/vendor/rpimages_"+dtBallot+".xml";
	xmlhttp.open("GET",xmlUrl,false);
	xmlhttp.send();
	xmlDoc=xmlhttp.responseXML; 

	var x=xmlDoc.getElementsByTagName("flats");
	for (i=0;i<x.length;i++) {	
		if (x[i].getElementsByTagName("NT")[0].childNodes[0].nodeValue == town) {
			if (x[i].getElementsByTagName("BLK")[0].childNodes[0].nodeValue == blkNo) {
				//if (x[i].getElementsByTagName("CTR")[0].childNodes[0].nodeValue == ctr) {
										
					var imgPath = x[i].getElementsByTagName("PATH")[0].childNodes[0].nodeValue;
					imgPath = serverMap + imgPath.substring(6, imgPath.length);
					var imgFileNames = x[i].getElementsByTagName("FILENAME");
					for (j=0;j<imgFileNames.length;j++) {
						var imgFileName = imgFileNames[j].childNodes[0].nodeValue;
						//alert(imgFileName);
						
						//if img file name contains unit no
						if (imgFileName.indexOf(unitNo.substring(1))>-1) {
							$(".slider-for").append($("<div class='sliderMain'><img src=" + imgPath + imgFileName + "></img></div>"));
							$(".slider-nav").append($("<div class='thumbslides'><img src=" + imgPath + imgFileName + "></img></div>"));
						}
					}
				//}
			}
		}
	}
	
	load_slider();	// initialize the slider  
}
function onChangeRPImg(imgPath,imgFileNames){
	
	$(".slider-for").remove(); // remove to avoid slider from append continuesly at second click
	$(".slider-nav").remove();
	$(".sliderContainer").append("<div class='slider slider-for'></div><div class='slider slider-nav'></div>");	
	var imgNames = imgFileNames.split(",");
    
	for (j=0;j<imgNames.length;j++) {
		var imgFileName = imgNames[j];
		$(".slider-for").append($("<div class='sliderMain'><img src=" + imgPath +"/$file/"+imgFileName + "></img></div>"));
		$(".slider-nav").append($("<div class='thumbslides'><img src=" + imgPath +"/$file/"+imgFileName + "></img></div>"));	
	}
	
	load_slider();	// initialize the slider  
}

function getUrlParameters(parameter, staticURL, decode){
	   /*
		Function: getUrlParameters
		Description: Get the value of URL parameters either from 
					 current URL or static URL
		Author: Tirumal
		URL: www.code-tricks.com
	   */
	   
	   var currLocation = (staticURL.length)? staticURL : window.location.search,
		   parArr = currLocation.split("?")[1].split("&"),
		   returnBool = true;
	   
	   for(var i = 0; i < parArr.length; i++){
			parr = parArr[i].split("=");
			if(parr[0] == parameter){
				return (decode) ? decodeURIComponent(parr[1]) : parr[1];
				returnBool = true;
			}else{
				returnBool = false;            
			}
	   }
	   
	   if(!returnBool) return false;  
	  
	}
	
function load_slider(){
	
	if($('.slider').length) {	  
	  
    $('.slider-for').on('init', function(slick){
		
      $('.slider-cta-link').fadeIn();
	 
    }).on('beforeChange', function(event, slick, currentSlide, nextSlide){
      $(slick.$slides[currentSlide]).find('slider-cta-link').fadeOut();
    });	
	
    var mainSlider = $('.slider-for').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
		autoplay: false,
        speed: 500,
        arrows: true,
        fade: true,
        mobileFirst: true,
        asNavFor: '.slider-nav',
		
    })
	
   var childSlider = $('.slider-nav').slick({
        slidesToShow: 4,
        slidesToScroll: 1,
        speed: 500,
        arrows: false,
		autoplay: false,
        asNavFor: '.slider-for',
        dots: false,
        centerMode: true,
        focusOnSelect: true,
		
        slide: 'div',
        responsive: [
        {
          breakpoint: 600,
          settings: {
            slidesToShow: 3,
            slidesToScroll: 1
          }
        },
        {
          breakpoint: 480,
          settings: {
            slidesToShow: 3,
            slidesToScroll: 1
          }
        }
      ]
    });	
	
	// start the animation
	mainSlider.slick('slickPlay');
	childSlider.slick('slickPlay');
	
	// once click here stop the slider
	$(".thumbslides").click(function(e) {    
		mainSlider.slick('slickPause');
	    childSlider.slick('slickPause');
    });
	
	$(".slick-next").click(function(e) {    
		mainSlider.slick('slickPause');
	    childSlider.slick('slickPause');
    });
	
	$(".slick-prev").click(function(e) {    
		mainSlider.slick('slickPause');
	    childSlider.slick('slickPause');
    });
	
  }
  
}


function load_topnav() {
  var source_url = serverMap+"15MAYSBF_page_1905/$file/top-nav.html";

  $('.main-nav .top-bar-section').load(source_url, function( response, status, xhr ) {
    if ( status != "error" ) {
      $('.apply-online').click(function(e) {
        e.preventDefault();
        e.stopPropagation();
        ApplyButton();
      });
	
      // $('.main-nav .top-bar-section').find('a[href*="steps.html"]').parent().addClass('active');

	 // $('.main-nav .top-bar-section').find('a[href*="javascript:void(0)"]').parent().addClass('active');

	  
	
      var curr_location_arr = location.pathname.split('/');
      var current_location = curr_location_arr[curr_location_arr.length-1];
      $('.main-nav .top-bar-section').find('a[href*="' + current_location + '"]').parent().addClass('active');
      $(document).foundation('topbar', 'reflow');
	  // $('.main-nav .top-bar-section').find('a[href*="javascript:void(1)"]').parent().addClass('active');
	 // alert(current_location.slice(0, 5));
	  if(current_location.slice(0, 5) == "price"){
		  $('.main-nav .top-bar-section').find('a[href*="javascript:void(2)"]').parent().addClass('active');
	  }
    }
  });
}

function load_btonav() {
  var source_url = "../../15MAYSBF_page_1905/$file/bto-nav.html";

  $('#navid-2').load(source_url, function( response, status, xhr ) {
    if ( status != "error" ) {
      
      // var targetdate = new Date('February 10, 2015 00:00:00');
      var targetdate = new Date('February 18, 2015 01:00:00');
      var today = new Date();
      
      if (targetdate<=today)
      {
        $('.before-launch-bto').remove();
		//$('.launch-bto').remove();
      } 
      else
      {
        $('.launch-bto').remove();
      }
      
      var bodyTpl = $('body').attr('id');
      switch(bodyTpl) {
        case "bto-tpl-1":
          $('#bto-icon-nav .icon-1 > a, .content-wrapper').addClass('bg-beige');
          if($('#bto-tpl-1').hasClass('proj-2')) {
            $('.bto-icon1-mobile2').addClass('bg-beige');
          } else {
            $('.bto-icon1-mobile').addClass('bg-beige');
          }
          $('#bto-subnav .top-bar').addClass('subnav-icon-1');
          $('#bto-subnav').parent().addClass('bg-beige');
          $('.icon-1 > ul.dropdown > li').each(function() {
            var idx = $(this).index();
            // console.log(idx + " : " + $(this).html());
            if(idx > 0) {
              $(this).clone(true).appendTo('#bto-subnav .top-bar-section > ul');
            }
          });
          break;

        case "bto-tpl-2":
          $('#bto-icon-nav .icon-2 > a, .content-wrapper').addClass('bg-green');
          if($('#bto-tpl-2').hasClass('proj-2')) {
            $('.bto-icon2-mobile2').addClass('bg-green');
          } else {
            $('.bto-icon2-mobile').addClass('bg-green');
          }
          $('#bto-subnav .top-bar').addClass('subnav-icon-2');
          $('#bto-subnav').parent().addClass('bg-green');
          $('.icon-2 > ul.dropdown > li').each(function() {
            var idx = $(this).index();
            // console.log(idx + " : " + $(this).html());
            if(idx > 0) {
              $(this).clone(true).appendTo('#bto-subnav .top-bar-section > ul');
            }
          });
          break;

        case "bto-tpl-3":
          $('#bto-icon-nav .icon-3 > a, .content-wrapper, .bto-icon3-mobile').addClass('bg-cyan');
          $('#bto-subnav .top-bar').addClass('subnav-icon-3');
          $('#bto-subnav').parent().addClass('bg-cyan');
          $('.icon-3 > ul.dropdown > li').each(function() {
            var idx = $(this).index();
            // console.log(idx + " : " + $(this).html());
            if(idx > 0) {
              $(this).clone(true).appendTo('#bto-subnav .top-bar-section > ul');
            }
          });
          break;

        case "bto-tpl-4":
          $('#bto-icon-nav .icon-4 > a, .content-wrapper, .bto-icon4-mobile').addClass('bg-blue');
          $('#bto-subnav .top-bar').addClass('subnav-icon-4');
          $('#bto-subnav').parent().addClass('bg-blue');
          $('.icon-4 > ul.dropdown > li').each(function() {
            var idx = $(this).index();
            // console.log(idx + " : " + $(this).html());
            if(idx > 0) {
              $(this).clone(true).appendTo('#bto-subnav .top-bar-section > ul');
            }
          });
          break;

        default:
      }

      $('#subnav-title').html($('.breadcrumbs li:last-child').text());
      //site_get_there();



      // BTO icon menu //
      $('#bto-icon-nav .top-bar-section > ul > li > a').hover(function() {
        // $('#bto-icon-nav .top-bar-section > ul > li').removeClass('active');
        /*$(this).parent().addClass('active');
      }).mouseleave(function() {
        $(this).blur().parent().removeClass('active');*/
	
        $(this).parent().find('.dropdown').hover(function(e){
			
          $(this).parent().addClass('active');
        }).mouseleave(function(e){
          e.stopImmediatePropagation();
          $(this).parent().removeClass('active');
          // console.log('test out');
        });
      });
      $('#bto-icon-nav .top-bar-section > ul > li > a').click(function(e) {
        e.preventDefault();
        e.stopImmediatePropagation();
        $(document).one('click', function(e){
          // console.log("test" +e.target);
          if($('#bto-icon-nav').has(e.target).length === 0){
            $(this).filter('li.active').parent().removeClass('active');  
          }
        });
      });

      $(document).foundation('topbar', 'reflow');
    }
  });  
}

function load_oc(url_link) {
  $('.oc-item-container').load(url_link, function( response, status, xhr ) {
    if ( status != "error" ) {
      var $section = $('#inverted-contain');
      var $section_panzoom = $section.find('.panzoom');
      generateZoom($section, $section_panzoom);
    }
  });  
}

function load_map_plan(url_link) {
  $('.mp-item-container').load(url_link, function( response, status, xhr ) {
    if ( status != "error" ) {
      var $section = $('#inverted-contain');
      var $section_panzoom = $section.find('.panzoom');
      generateZoom($section, $section_panzoom);
    }
  });  
}

function zoom() {	
	var $section = $('#otherMaps');
    var $section_panzoom = $section.find('.panzoom');
    generateZoom($section, $section_panzoom);
}
function zoom1() {	
	var $section = $('#siteMapDiv');
    var $section_panzoom = $section.find('.panzoom');
    generateZoom($section, $section_panzoom);
}
function zoom2() {	
	var $section = $('#townMapDiv');
    var $section_panzoom = $section.find('.panzoom');
    generateZoom($section, $section_panzoom);
}
function zoom3() {	
	var $section = $('#blockMapDiv');
    var $section_panzoom = $section.find('.panzoom');
    generateZoom($section, $section_panzoom);
}
function zoom4() {	
	var $section = $('#udMapDiv');
    var $section_panzoom = $section.find('.panzoom');
    generateZoom($section, $section_panzoom);
}
function zoom5() {	
	var $section = $('#floorMapDiv');
    var $section_panzoom = $section.find('.panzoom');
    generateZoom($section, $section_panzoom);
}
function zoom6() {	
	var $section = $('#layoutMapDiv');
    var $section_panzoom = $section.find('.panzoom');
    generateZoom($section, $section_panzoom);
}
function zoom7() {	
	var $section = $('#genSpecMapDiv');
    var $section_panzoom = $section.find('.panzoom');
    generateZoom($section, $section_panzoom);
}
function zoom8() {	
	var $section = $('#addMapMapDiv');
    var $section_panzoom = $section.find('.panzoom');
    generateZoom($section, $section_panzoom);
}

function generateZoom($elem, $elem_panzoom) {
  // if(typeof $elem_panzoom.panzoom("instance") !== "undefined") {

  // }
  $elem_panzoom.panzoom({
    $zoomIn: $elem.find(".zoom-in"),
    $zoomOut: $elem.find(".zoom-out"),
    $zoomRange: $elem.find(".zoom-range"),
    $reset: $elem.find(".reset"),
    $set: $elem.find('.panzoom-parent > img'),
    maxScale: 7,
    increment: 0.5,
    minScale: 1,
    contain: 'invert'
  });
}

function site_get_there() {
  $('.cta-get-there').click(function(e) {
    e.preventDefault();
    // e.stopPropagation();
    
    placelocation($(this).attr('href'));
  });
}

function placelocation(location){
  REDIPS.dialog.show(295, 130, 'This will link you to the Google Maps website. The information provided is to facilitate navigation to the development. HDB is not responsible for the content shown on Google Maps.', 'Proceed|'+location+'', 'Close');
}
function buangpv() {
  confirmmap('https://maps.google.com.sg/maps?q=1.383867,103.879827&hl=en&ll=1.383338,103.879069&spn=0.004655,0.017638&sll=1.385473,103.882127&sspn=0.020636,0.035276&t=m&z=17&layer=c&cbll=1.38334,103.879074&panoid=mKBDhINyKJ10KF59hGaWZg&cbp=11,85.09,,0,-2.72&output=classic&dg=brw');
}

function buangt() {
  confirmmap('https://maps.google.com.sg/maps?q=1.385815,103.8811489&hl=en&ll=1.385473,103.882127&spn=0.00931,0.035276&sll=1.385815,103.8811489&layer=c&cbp=11,303.91,,0,-5.5&cbll=1.385483,103.882131&t=m&panoid=nL4eHVNFvm2WejBoWiPf3g&z=16&output=classic&dg=brw');
}
function webb() {
  confirmmap('https://maps.google.com.sg/maps?q=1.359121,103.740892&hl=en&ll=1.359237,103.739347&spn=0.004655,0.017638&sll=1.383338,103.879069&sspn=0.010318,0.017638&t=m&z=17&layer=c&cbll=1.359236,103.73935&panoid=G20dtDp2mGDWQ6zlKdfVTg&cbp=11,82.54,,0,-3.18&output=classic&dg=brw');
}
function wrbb() {
  confirmmap('https://maps.google.com.sg/maps?q=1.355105,103.740104&hl=en&ll=1.351815,103.744111&spn=0.00931,0.035276&sll=1.359237,103.739347&sspn=0.010318,0.017638&t=m&z=16&layer=c&cbll=1.351806,103.744101&panoid=KKRoi4zXQ6d6gttM508O2A&cbp=11,303.25,,0,-5.43&output=classic&dg=brw');
}
function macps() {
  confirmmap('https://maps.google.com.sg/maps?q=1.3255533,103.8886146&hl=en&ll=1.32293,103.889143&spn=0.004559,0.016512&sll=1.351815,103.744111&sspn=0.020637,0.035276&t=m&layer=c&cbll=1.322927,103.889146&panoid=fISDAsxnUen3AEIHu2rFWQ&cbp=11,47.71,,0,-5.44&z=17&output=classic&dg=brw');
}


function confirmmap(linkmap){

  var iMyWidth;
  var iMyHeight;
  //half the screen width minus half the new window width (plus 5 pixel borders).
  iMyWidth2 = window.screen.width - 500;
  iMyWidth = (window.screen.width/2) - (iMyWidth2/2);
  //half the screen height minus half the new window height (plus title and status bars).
  iMyHeight2 = window.screen.height - 100;
  iMyHeight = (window.screen.height/2) - (iMyHeight/2);
  //Open the window.
  var detect_device = {};
  detect_device.mobile = (/mobile/i).test(navigator.userAgent);
  if(!detect_device.mobile) {
    var win2 = window.open(linkmap,"","status=no,height="+iMyHeight2+",width="+iMyWidth2+",resizable=yes,left=" + iMyWidth + ",top=" + iMyHeight + ",screenX=" + iMyWidth + ",screenY=" + iMyHeight + ",toolbar=no,menubar=no,scrollbars=yes,location=no,directories=no");  
  }
  else {
    var win2 = window.open(linkmap);
  }
} 

function doGoogleSearch(site,but){

if(but) {
  
  if (site != 'mobile') {
    $("#gceq").val($("#q").val());
  } else {
    $("#gceq").val($(".gs_fld").val());   
  }
  
   $("#q, .gs_fld").val($("#gceq").val());
}

$("form[name=SearchPlugInfrm]").submit()
}
function initGoogleCSE(googlecx){
  $("#q, .gs_fld").unbind("keypress").keypress(function (e) {
    if (e.which == 13) {

      $("#gceq").val($(this).val());
      $("#q, .gs_fld").val($("#gceq").val() );

      doGoogleSearch();
      e.preventDefault();
      return false; 
    }
  });
  if(typeof(googlecx)=="undefined") {
    googlecx = "013311091762527866338:yfyhut9jfiy"; //HDB Default account
  }
  //add google form using jquery
  var form = $("<form/>")
    form.attr( {name:"SearchPlugInfrm",
    action:"http://www.google.com/cse",
    target:"_blank",
    style:"display:none"});
  var input_q = $("<input type='hidden' name='q' id='gceq' />")
  var input_cx = $('<input type="hidden" name="cx" value="' + googlecx + '" />');
  var input_ie = $('<input type="hidden" name="ie" value="UTF-8" />');
  form.append(input_q).append(input_cx).append(input_ie);
  $("body").append(form);
}




function goMapLocation(town, coor1, coor2, coor3, coor4)
{
document.getElementById("xx").value = coor1;
document.getElementById("yy").value = coor2;
document.getElementById("xx1").value = coor3;
document.getElementById("yy1").value = coor4;

sitelink= "../../14SEPBTO_zoom_sel_1905/$file/townmap.html?open&twn="+town;
document.getElementById('mapframe').src =sitelink;
show1=document.getElementById("map1").style;
show1.display="";
show2=document.getElementById("map2").style;
show2.display="none";

}

function goSitePlan(town,contract)
{
sitelink= "../../14SEPBTO_zoom_sel_1905/$file/siteplan.html?open&twn="+town+"&sp="+contract;
document.getElementById('mapframe').src =sitelink;
show1=document.getElementById("map1").style;
show1.display="";
show2=document.getElementById("map2").style;
show2.display="none";

}

function goBlockPlan(town,contract,block)
{
sitelink= "../../14SEPBTO_zoom_sel_1905/$file/blockplan.html?open&twn="+town+"&sp="+contract+"&blk="+block;
document.getElementById('mapframe').src =sitelink;
show1=document.getElementById("map1").style;
show1.display="";
show2=document.getElementById("map2").style;
show2.display="none";

}

function goSpecs(town, contract)
{
specslink= "../../14SEPBTO"+town+"_page_1905/$file/specs_text.htm";
document.getElementById('mapframe2').src = specslink;
show1=document.getElementById("map1").style;
show1.display="none";
show2=document.getElementById("map2").style;
show2.display="";
}

function goTypicalPlan(town, contract)
{
sitelink= "../../14SEPBTO"+town+"_page_1905/$file/typ_sel.htm";
document.getElementById('mapframe2').src = sitelink;
show1=document.getElementById("map1").style;
show1.display="none";
show2=document.getElementById("map2").style;
show2.display="";
}

function goFurPlan(town, contract)
{
sitelink= "../../14SEPBTO"+town+"_page_1905/$file/fur_sel.htm"; 
document.getElementById('mapframe2').src = sitelink;
show1=document.getElementById("map1").style;
show1.display="none";
show2=document.getElementById("map2").style;
show2.display="";
}

function goUnitPlan(town, contract, block)
{
sitelink= "../../14SEPBTO_zoom_sel_1905/$file/unitplan"+town+".html?open&twn="+town+"&sp="+contract+"&blk="+block;
document.getElementById('mapframe').src =sitelink;
show1=document.getElementById("map1").style;
show1.display="";
show2=document.getElementById("map2").style;
show2.display="none";
}

function goPer(town, contract)
{
if ((town!='PG')&&(town!='PG2')&&(town!='PG3')&&(town!='YS')&&(town!='YS2')&&(town!='YS3'))
{ sitelink= "../../14SEPBTO2R_page_1905/$file/per_"+town+".htm";}


document.getElementById('mapframe2').src = sitelink;
show1=document.getElementById("map1").style;
show1.display="none";
show2=document.getElementById("map2").style;
show2.display="";
}

function goFlats(url)
{
  window.location.href = url;

}

function goOCS(twn,type)
{
  if (twn=="BB") ocsbgcolor = "#F58221";
  if (twn=="HG") ocsbgcolor = "#79C471";
  if (twn=="HG2") ocsbgcolor = "#79C471";
  if (twn=="JW") ocsbgcolor = "#0696A3";
  if (twn=="KWN") ocsbgcolor = "#2C3192";
  
  for (var i=1; i<5; i++)
  {
  if (document.getElementById("color"+i))
  {
  myObj = document.getElementById("color"+i);
  myObj.style.color = "";
  }
  }
  
  for (var i=1; i<5; i++)
  {
  if (document.getElementById("ocsbg"+i))
  {
  myObj = document.getElementById("ocsbg"+i);
  myObj.style.background = "#E2D9E5";
  }
  }

  if (type=="doord9a") 
  {
  document.getElementById("ocs").innerHTML = "<iframe src=\"../../14SEPBTO_zoom_sel_1905/$file/door_d9a.html\" width=\"723\" height=\"1570\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\" scrolling=\"No\"></iframe>";
  myObj = document.getElementById("color1");
  myObj.style.color = "#FFFFFF";
  myObj = document.getElementById("ocsbg1");
  myObj.style.background = ocsbgcolor;
  myObj = document.getElementById("disc_door");
  myObj.style.display = "";
  myObj = document.getElementById("disc_ocs");
  myObj.style.display = "none";
  myObj = document.getElementById("disc_sanitary");
  myObj.style.display = "none";
  myObj = document.getElementById("disc_sa");
  myObj.style.display = "none";
  myObj = document.getElementById("header");
  myObj.style.display = "none";
  myObj = document.getElementById("header-door");
  myObj.style.display = "";
  }
  else if (type=="doord10") 
  {
  document.getElementById("ocs").innerHTML = "<iframe src=\"../../14SEPBTO_zoom_sel_1905/$file/door_d10.html\" width=\"802\" height=\"857\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\" scrolling=\"No\"></iframe>";
  myObj = document.getElementById("color1");
  myObj.style.color = "#FFFFFF";
  myObj = document.getElementById("ocsbg1");
  myObj.style.background = ocsbgcolor;
  myObj = document.getElementById("disc_door");
  myObj.style.display = "";
  myObj = document.getElementById("disc_ocs");
  myObj.style.display = "none";
  myObj = document.getElementById("disc_sanitary");
  myObj.style.display = "none";
  myObj = document.getElementById("disc_sa");
  myObj.style.display = "none";
  myObj = document.getElementById("header");
  myObj.style.display = "none";
  myObj = document.getElementById("header-door");
  myObj.style.display = "";
  }
  else if (type=="doord1") 
  {
  document.getElementById("ocs").innerHTML = "<iframe src=\"../../14SEPBTO_zoom_sel_1905/$file/door_d1.html\" width=\"684\" height=\"1433\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\" scrolling=\"No\"></iframe>";
  myObj = document.getElementById("color1");
  myObj.style.color = "#FFFFFF";
  myObj = document.getElementById("ocsbg1");
  myObj.style.background = ocsbgcolor;
  myObj = document.getElementById("disc_door");
  myObj.style.display = "";
  myObj = document.getElementById("disc_ocs");
  myObj.style.display = "none";
  myObj = document.getElementById("disc_sanitary");
  myObj.style.display = "none";
  myObj = document.getElementById("disc_sa");
  myObj.style.display = "none";
  myObj = document.getElementById("header");
  myObj.style.display = "none";
  myObj = document.getElementById("header-door");
  myObj.style.display = "";
  }
  else if (type=="floor") 
  {
  if (twn=="BB") document.getElementById("ocs").innerHTML = "<iframe src=\"../../14SEPBTO_zoom_sel_1905/$file/floor1.html?open&twn="+twn+"\" width=\"756\" height=\"562\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\" scrolling=\"No\"></iframe>";
  else if (twn=="KWN") document.getElementById("ocs").innerHTML = "<iframe src=\"../../14SEPBTO_zoom_sel_1905/$file/floor2.html?open&twn="+twn+"\" width=\"762\" height=\"940\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\" scrolling=\"No\"></iframe>";
  else document.getElementById("ocs").innerHTML = "<iframe src=\"../../14SEPBTO_zoom_sel_1905/$file/floor.html?open&twn="+twn+"\" width=\"756\" height=\"675\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\" scrolling=\"No\"></iframe>";
  myObj = document.getElementById("color2");
  myObj.style.color = "#FFFFFF";
  myObj = document.getElementById("ocsbg2");
  myObj.style.background = ocsbgcolor;
  myObj = document.getElementById("disc_door");
  myObj.style.display = "none";
  myObj = document.getElementById("disc_ocs");
  myObj.style.display = "";
  myObj = document.getElementById("disc_sanitary");
  myObj.style.display = "none";
  myObj = document.getElementById("disc_sa");
  myObj.style.display = "none";
  myObj = document.getElementById("header");
  myObj.style.display = "";
  myObj = document.getElementById("header-door");
  myObj.style.display = "none";
  }
  else if (type=="sa") 
  {
  document.getElementById("ocs").innerHTML = "<iframe src=\"../../14SEPBTO_zoom_sel_1905/$file/sa.html\" width=\"787\" height=\"527\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\" scrolling=\"No\"></iframe>";
  myObj = document.getElementById("color3");
  myObj.style.color = "#FFFFFF";
  myObj = document.getElementById("ocsbg3");
  myObj.style.background = ocsbgcolor;
  myObj = document.getElementById("disc_door");
  myObj.style.display = "none";
  myObj = document.getElementById("disc_ocs");
  myObj.style.display = "none";
  myObj = document.getElementById("disc_sanitary");
  myObj.style.display = "none";
  myObj = document.getElementById("disc_sa");
  myObj.style.display = "";
  myObj = document.getElementById("header");
  myObj.style.display = "none";
  myObj = document.getElementById("header-door");
  myObj.style.display = "none";
  }
  else if (type=="sanitary") 
  {
  document.getElementById("ocs").innerHTML = "<iframe src=\"../../14SEPBTO_zoom_sel_1905/$file/sanitary.html\" width=\"790\" height=\"940\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\" scrolling=\"No\"></iframe>";
  myObj = document.getElementById("color4");
  myObj.style.color = "#FFFFFF";
  myObj = document.getElementById("ocsbg4");
  myObj.style.background = ocsbgcolor;
  myObj = document.getElementById("disc_door");
  myObj.style.display = "none";
  myObj = document.getElementById("disc_ocs");
  myObj.style.display = "none";
  myObj = document.getElementById("disc_sanitary");
  myObj.style.display = "";
  myObj = document.getElementById("disc_sa");
  myObj.style.display = "none";
  myObj = document.getElementById("header");
  myObj.style.display = "none";
  myObj = document.getElementById("header-door");
  myObj.style.display = "none";
  }
}


function gotoplan(getno){

if ((isgtwn=="HG")&&(isgctr=='N9C16')) isgtwn = "HG2";
if ((isgtwn=="HG")&&(isgctr=='N9C17')) isgtwn = "HG2";

var destination= self.location; 

if (getno==1) destination="sp";
else {
for(var i = 0; i<document.formname.plans.length; i++){
  if(document.formname.plans[i].checked) {
    destination=document.formname.plans[i].value }
  }
}
if (destination=="map"){

if (isgtwn=="BB")
{
if ((isgctr=='N4C16')||(isgctr=='N4C17')) {
goMapLocation(isgtwn,520,820,-220,-350); 
}
}

if (isgtwn=="HG")
{
if (isgctr=='N9C19') {
goMapLocation(isgtwn,240,235,-50,0); 
}
}

if (isgtwn=="HG2")
{
if ((isgctr=='N9C16')||(isgctr=='N9C17')) {
goMapLocation(isgtwn,270,300,-80,0); 
}
}

if (isgtwn=="JW")
{
if (isgctr=='N1C29B') {
goMapLocation(isgtwn,780,985,-480,-850); 
}
}

if (isgtwn=="JW")
{
if (isgctr=='N1C32') {
goMapLocation(isgtwn,730,985,-150,-850); 
}
}

if (isgtwn=="KWN")
{
if (isgctr=='N4C21') {
goMapLocation(isgtwn,880,445,-280,-150); 
}
}

}

else if (destination=="sp"){
goSitePlan(isgtwn,isgctr);
}

else if (destination=="bp"){
goBlockPlan(isgtwn,isgctr,isgblk);
}

else if (destination=="tp"){
goTypicalPlan(isgtwn,isgctr);
}

else if (destination=="fp"){
goFurPlan(isgtwn,isgctr);
}

else if (destination=="ud"){
goUnitPlan(isgtwn,isgctr,isgblk);
}

else if (destination=="gs"){
goSpecs(isgtwn,isgctr);
}

else if (destination=="per"){
goPer(isgtwn,isgctr);
}

}




function loadtwn(){

if (isgtwn=='BB') {
document.getElementById("titletwn").innerHTML = "Bukit Batok";
document.getElementById("barcolor").style.backgroundImage = "url(../../14SEPBTOBB_images_1905/$file/bar.gif)";
document.getElementById("Frame980sel").style.backgroundColor = "#FFF6EF";
if (flattype=="bto") document.getElementById('fda').src = isgurl + '/webapp/BP13INTV/BP13PFlatSearch.jsp?Town=Bukit Batok&Flat_Type=BTO&DesType=A&ethnic=Y&Flat=2-ROOM&ViewOption=A&dteBallot=201409&projName=A';
else document.getElementById('fda').src = isgurl + '/webapp/BP13INTV/BP13PFlatSearch.jsp?Town=Bukit Batok&Flat_Type=BTO&DesType=A&ethnic=Y&Flat='+flattype+'&ViewOption=A&dteBallot=201409&projName=A';
}

if (isgtwn=='HG') {
document.getElementById("titletwn").innerHTML = "Hougang";
document.getElementById("barcolor").style.backgroundImage = "url(../../14SEPBTOHG_images_1905/$file/bar.gif)";
document.getElementById("Frame980sel").style.backgroundColor = "#F3FAF2";
if (flattype=="bto") document.getElementById('fda').src = isgurl + '/webapp/BP13INTV/BP13PFlatSearch.jsp?Town=Hougang&Flat_Type=BTO&DesType=A&ethnic=Y&Flat=2-ROOM&ViewOption=A&dteBallot=201409&projName=A';
else document.getElementById('fda').src = isgurl + '/webapp/BP13INTV/BP13PFlatSearch.jsp?Town=Hougang&Flat_Type=BTO&DesType=A&ethnic=Y&Flat='+flattype+'&ViewOption=A&dteBallot=201409&projName=A';
}

if (isgtwn=='JW') {
document.getElementById("titletwn").innerHTML = "Jurong West";
document.getElementById("barcolor").style.backgroundImage = "url(../../14SEPBTOJW_images_1905/$file/bar.gif)";
document.getElementById("Frame980sel").style.backgroundColor = "#EBF5F7";
if (flattype=="bto") document.getElementById('fda').src = isgurl + '/webapp/BP13INTV/BP13PFlatSearch.jsp?Town=Jurong West&Flat_Type=BTO&DesType=A&ethnic=Y&Flat=2-ROOM&ViewOption=A&dteBallot=201409&projName=A';
else document.getElementById('fda').src = isgurl + '/webapp/BP13INTV/BP13PFlatSearch.jsp?Town=Jurong West&Flat_Type=BTO&DesType=A&ethnic=Y&Flat='+flattype+'&ViewOption=A&dteBallot=201409&projName=A';
}

if (isgtwn=='KWN') {
document.getElementById("titletwn").innerHTML = "Kallang/Whampoa";
document.getElementById("barcolor").style.backgroundImage = "url(../../14SEPBTOKWN_images_1905/$file/bar.gif)";
document.getElementById("Frame980sel").style.backgroundColor = "#F1F0F6";
if (flattype=="bto") document.getElementById('fda').src = isgurl + '/webapp/BP13INTV/BP13PFlatSearch.jsp?Town=Kallang/Whampoa&Flat_Type=BTO&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201409&projName=A';
else document.getElementById('fda').src = isgurl + '/webapp/BP13INTV/BP13PFlatSearch.jsp?Town=Kallang/Whampoa&Flat_Type=BTO&DesType=A&ethnic=Y&Flat='+flattype+'&ViewOption=A&dteBallot=201409&projName=A';
}

//testing purpose
//document.getElementById('mp').src = "tm.htm?open&twn=HG&ctr=N9C19&blk=997A";

}


// Popup window code
function newPopup(url) {
	popupWindow = window.open(
		url,'popUpWindow','height=700,width=800,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
}

	
function popitup(url) {
	newwindow=window.open(url,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

/*

function checkresultsBB(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=BUKIT BATOK&Flat_Type=BTO&DesType=A&ethnic=Y&Flat=2-Room&ViewOption=A&dteBallot=201502&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checkresultsHG(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=HOUGANG&Flat_Type=BTO&DesType=A&ethnic=Y&Flat=2-Room&ViewOption=A&dteBallot=201502&projName=A";

newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checkresultsMS(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=GEYLANG&Flat_Type=BTO&DesType=A&ethnic=Y&Flat=3-Room&ViewOption=A&dteBallot=201502&projName=A";  
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}
*/	
function checktownAMK(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=ANG MO KIO&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownBEDOK(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=BEDOK&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownBISHAN(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=BISHAN&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownBB(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=BUKIT BATOK&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=2-Room&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownBM(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=BUKIT MERAH&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownBP(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=BUKIT PANJANG&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}


function checktownBT(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=BUKIT TIMAH&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownCENTRAL(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=CENTRAL&Flat_Type=SBF&DesType=S&ethnic=Y&Flat=3-Room&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownCCK(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=CHOA CHU KANG&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}


function checktownCLEMENTI(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=CLEMENTI&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=2-Room&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownGL(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=GEYLANG&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownHG(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=HOUGANG&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownJE(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=JURONG EAST&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownJW(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=JURONG WEST&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}


function checktownKW(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=KALLANG/WHAMPOA&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}


function checktownLCK(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=LIM CHU KANG&Flat_Type=SBF&DesType=S&ethnic=Y&Flat=3-Room&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownMP(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=MARINE PARADE&Flat_Type=SBF&DesType=S&ethnic=Y&Flat=3-Room&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownPR(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=PASIR RIS&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownPUNGGOL(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=PUNGGOL&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}


function checktownQT(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=QUEENSTOWN&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownSEMB(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=SEMBAWANG&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=2-Room&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}


function checktownSK(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=SENGKANG&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}


function checktownSERG(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=SERANGOON&Flat_Type=SBF&DesType=S&ethnic=Y&Flat=3-Room&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}


function checktownTAMPINES(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=TAMPINES&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

function checktownTPY(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=TOA PAYOH&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}


function checktownWOOD(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=WOODLANDS&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}


function checktownYISH(){

strApplyURL = isgurl + "/webapp/BP13AWFlatAvail/BP13PFlatSearch.jsp?Town=YISHUN&Flat_Type=SBF&DesType=A&ethnic=Y&Flat=SA&ViewOption=A&dteBallot=201505&projName=A";
 
newwindow=window.open(strApplyURL,'name','height=590,width=420,left=10,top=10,resizable=yes');
	if (window.focus) {newwindow.focus()}
	return false;
}

// Popup window code
function newPopup(url) {
	popupWindow = window.open(
		url,'popUpWindow','height=500,width=600,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
}


